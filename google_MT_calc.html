<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google NMT Cost Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 min-h-screen p-4 md:p-8">

    <div class="max-w-4xl mx-auto">
        <!-- Header -->
        <div class="mb-8 text-center">
            <h1 class="text-3xl font-bold text-gray-900 mb-2">Google NMT Cost Calculator</h1>
            <p class="text-gray-600">Estimate your translation costs based on volume and language count. Default value here is Intake Base Template</p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            
            <!-- Input Section -->
            <div class="lg:col-span-1 bg-white rounded-xl shadow-sm border border-gray-200 p-6 h-fit">
                <h2 class="text-lg font-semibold mb-4 flex items-center text-blue-600">
                    <i class="fas fa-sliders-h mr-2"></i> Parameters
                </h2>

                <div class="space-y-4">
                    <!-- Strings per Form -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Strings per Form</label>
                        <input type="number" id="stringsPerForm" value="762" min="0" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors">
                    </div>

                    <!-- Words per String -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Words per String</label>
                        <input type="number" id="wordsPerString" value="4" min="0" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors">
                    </div>

                    <!-- Avg Chars per Word -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Avg. Characters per Word</label>
                        <input type="number" id="charsPerWord" value="6" min="0" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors">
                    </div>

                    <!-- Number of Forms -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Number of Forms</label>
                        <input type="number" id="numForms" value="25" min="0" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors">
                    </div>

                    <!-- Target Languages -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Target Languages</label>
                        <input type="number" id="targetLanguages" value="27" min="1" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors">
                    </div>

                    <!-- Free Tier Toggle -->
                    <div class="pt-4 border-t border-gray-100">
                        <label class="flex items-center cursor-pointer">
                            <div class="relative">
                                <input type="checkbox" id="freeTier" class="sr-only" checked>
                                <div class="w-10 h-6 bg-gray-200 rounded-full shadow-inner transition-colors toggle-bg"></div>
                                <div class="dot absolute w-4 h-4 bg-white rounded-full shadow inset-y-1 left-1 transition-transform"></div>
                            </div>
                            <div class="ml-3 text-sm font-medium text-gray-700">Apply Free Tier Credit</div>
                        </label>
                        <p class="text-xs text-gray-500 mt-1 ml-13 pl-1">First 500k chars free ($10 credit)</p>
                    </div>
                </div>
            </div>

            <!-- Results Section -->
            <div class="lg:col-span-2 space-y-6">
                
                <!-- Main Cost Card -->
                <div class="bg-white rounded-xl shadow-lg border border-blue-100 overflow-hidden">
                    <div class="bg-gradient-to-r from-blue-600 to-indigo-700 p-6 text-white">
                        <h2 class="text-lg font-medium opacity-90 mb-1">Estimated Monthly Cost</h2>
                        <div class="flex items-baseline">
                            <span class="text-4xl font-bold" id="finalCostDisplay">$0.00</span>
                            <span class="ml-2 text-blue-200 text-sm">USD</span>
                        </div>
                    </div>
                    <div class="p-6">
                        <div class="flex justify-between items-center py-3 border-b border-gray-100">
                            <span class="text-gray-600">Base Cost (Before Credit)</span>
                            <span class="font-medium text-gray-900" id="baseCostDisplay">$0.00</span>
                        </div>
                        <div class="flex justify-between items-center py-3 border-b border-gray-100">
                            <span class="text-gray-600 flex items-center">
                                Free Tier Credit
                                <span class="ml-2 text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full" id="creditBadge">Active</span>
                            </span>
                            <span class="font-medium text-green-600" id="creditDisplay">-$0.00</span>
                        </div>
                        <div class="mt-4 bg-blue-50 rounded-lg p-4 text-sm text-blue-800 flex items-start">
                            <i class="fas fa-info-circle mt-1 mr-3 flex-shrink-0"></i>
                            <p>Based on Google Cloud Translation API (Basic/Advanced) pricing of <strong>$20.00</strong> per million characters.</p>
                        </div>
                    </div>
                </div>

                <!-- Breakdown Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Unit Stats -->
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-5">
                        <h3 class="text-gray-500 text-xs font-bold uppercase tracking-wider mb-4">Unit Breakdown</h3>
                        <div class="space-y-4">
                            <div class="flex justify-between items-center">
                                <div class="text-sm text-gray-600">Chars per String</div>
                                <div class="text-sm font-bold text-gray-900" id="charsPerStringDisplay">0</div>
                            </div>
                            <div class="flex justify-between items-center">
                                <div class="text-sm text-gray-600">Chars per Form</div>
                                <div class="text-sm font-bold text-gray-900" id="charsPerFormDisplay">0</div>
                            </div>
                            <div class="w-full bg-gray-100 rounded-full h-1.5 mt-2">
                                <div class="bg-blue-400 h-1.5 rounded-full" style="width: 100%"></div>
                            </div>
                            <p class="text-xs text-gray-400 text-right mt-1">*Includes estimated spaces</p>
                        </div>
                    </div>

                    <!-- Volume Stats -->
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-5">
                        <h3 class="text-gray-500 text-xs font-bold uppercase tracking-wider mb-4">Total Volume</h3>
                        <div class="space-y-4">
                            <div class="flex justify-between items-center">
                                <div class="text-sm text-gray-600">Source Characters</div>
                                <div class="text-sm font-bold text-gray-900" id="totalSourceCharsDisplay">0</div>
                            </div>
                             <div class="flex justify-between items-center">
                                <div class="text-sm text-gray-600">Multiplier</div>
                                <div class="text-sm font-bold text-indigo-600" id="multiplierDisplay">x 27</div>
                            </div>
                            <div class="pt-2 border-t border-gray-100 flex justify-between items-center">
                                <div class="text-sm font-bold text-gray-800">Billable Characters</div>
                                <div class="text-base font-bold text-blue-600" id="totalBillableCharsDisplay">0</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <style>
        /* Custom Toggle Styles */
        input:checked ~ .toggle-bg {
            background-color: #2563eb;
        }
        input:checked ~ .dot {
            transform: translateX(100%);
        }
    </style>

    <script>
        // Constants
        const PRICE_PER_MILLION = 20.00;
        const FREE_TIER_CREDIT = 10.00;
        const FREE_TIER_CHARS = 500000;

        // Elements
        const inputs = {
            stringsPerForm: document.getElementById('stringsPerForm'),
            wordsPerString: document.getElementById('wordsPerString'),
            charsPerWord: document.getElementById('charsPerWord'),
            numForms: document.getElementById('numForms'),
            targetLanguages: document.getElementById('targetLanguages'),
            freeTier: document.getElementById('freeTier')
        };

        const displays = {
            charsPerString: document.getElementById('charsPerStringDisplay'),
            charsPerForm: document.getElementById('charsPerFormDisplay'),
            totalSourceChars: document.getElementById('totalSourceCharsDisplay'),
            multiplier: document.getElementById('multiplierDisplay'),
            totalBillableChars: document.getElementById('totalBillableCharsDisplay'),
            finalCost: document.getElementById('finalCostDisplay'),
            baseCost: document.getElementById('baseCostDisplay'),
            credit: document.getElementById('creditDisplay'),
            creditBadge: document.getElementById('creditBadge')
        };

        // Formatters
        const currencyFmt = new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' });
        const numberFmt = new Intl.NumberFormat('en-US');

        function calculate() {
            // Get values
            const stringsPerForm = parseInt(inputs.stringsPerForm.value) || 0;
            const wordsPerString = parseInt(inputs.wordsPerString.value) || 0;
            const charsPerWord = parseInt(inputs.charsPerWord.value) || 0;
            const numForms = parseInt(inputs.numForms.value) || 0;
            const targetLanguages = parseInt(inputs.targetLanguages.value) || 0;
            const useFreeTier = inputs.freeTier.checked;

            // Logic: Calculate chars per string (words * chars) + spaces
            // Assuming 1 space between words. If 5 words, 4 spaces.
            const spaces = Math.max(0, wordsPerString - 1);
            const rawChars = wordsPerString * charsPerWord;
            const charsPerString = rawChars + spaces;

            const charsPerForm = charsPerString * stringsPerForm;
            const totalSourceChars = charsPerForm * numForms;
            const totalBillableChars = totalSourceChars * targetLanguages;

            // Cost Calculation
            // Cost = (Billable / 1,000,000) * $20
            const rawCost = (totalBillableChars / 1000000) * PRICE_PER_MILLION;
            
            let creditAmount = 0;
            if (useFreeTier) {
                // The free tier is actually the first 500k chars free, which equals $10.
                // If bill is less than $10, credit covers full bill.
                // If bill is more, credit is capped at $10.
                creditAmount = Math.min(rawCost, FREE_TIER_CREDIT);
            }
            
            const finalCost = Math.max(0, rawCost - creditAmount);

            // Update UI
            displays.charsPerString.textContent = numberFmt.format(charsPerString);
            displays.charsPerForm.textContent = numberFmt.format(charsPerForm);
            displays.totalSourceChars.textContent = numberFmt.format(totalSourceChars);
            displays.multiplier.textContent = `x ${targetLanguages}`;
            displays.totalBillableChars.textContent = numberFmt.format(totalBillableChars);
            
            displays.baseCost.textContent = currencyFmt.format(rawCost);
            displays.finalCost.textContent = currencyFmt.format(finalCost);
            
            if (useFreeTier) {
                displays.credit.textContent = `-${currencyFmt.format(creditAmount)}`;
                displays.credit.classList.remove('text-gray-400');
                displays.credit.classList.add('text-green-600');
                displays.creditBadge.textContent = 'Active';
                displays.creditBadge.className = 'ml-2 text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full';
            } else {
                displays.credit.textContent = '$0.00';
                displays.credit.classList.remove('text-green-600');
                displays.credit.classList.add('text-gray-400');
                displays.creditBadge.textContent = 'Inactive';
                displays.creditBadge.className = 'ml-2 text-xs bg-gray-100 text-gray-500 px-2 py-0.5 rounded-full';
            }
        }

        // Event Listeners
        Object.values(inputs).forEach(input => {
            input.addEventListener('input', calculate);
            input.addEventListener('change', calculate); // For checkbox
        });

        // Initial Calc
        calculate();

    </script>
</body>
</html>